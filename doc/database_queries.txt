This file documents the SQL queries used by the web interface to pull data
from the database tables documented in: doc/database_tables.txt

1) Generate inventory

CREATE TEMPORARY TABLE beers_bought_tmp AS (
    SELECT   beer_id,
             SUM(amount) AS count
    FROM     beers_bougth
    GROUP BY beer_id
);

CREATE TEMPORARY TABLE beers_sold_tmp AS (
    SELECT   beer_id,
             COUNT(beer_id) AS count
    FROM     beers_sold
    GROUP BY beer_id
);

CREATE TEMPORARY TABLE inventory_tmp AS (
    SELECT    beers_bought_tmp.beer_id,
              COALESCE(beers_bought_tmp.count, 0) - COALESCE(beers_sold_tmp.count, 0) AS count 
    FROM      beers_bought_tmp 
    LEFT JOIN beers_sold_tmp ON beers_bought_tmp.beer_id = beers_sold_tmp.beer_id;
);

SELECT * FROM inventory_tmp;
